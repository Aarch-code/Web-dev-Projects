<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Book Notes</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>My Book Notes</h1>
  <a href="/books/new">âž• Add New Book</a>

  <form method="get" action="/books">
    <input type="text" name="search" placeholder="Search title..." value="<%= search || '' %>">
    <select name="sort">
      <option value="date_read">Date Read</option>
      <option value="rating">Rating</option>
    </select>
    <button type="submit">Sort/Search</button>
  </form>

  <ul>
    <% books.forEach(book => { %>
      <li>
        <img src="<%= book.cover_url %>" width="100">
        <div>
          <h3><%= book.title %></h3>
          <p><%= book.author %> | Rating: <%= book.rating %>/5</p>
          <p><%= book.notes %></p>
          <small>Read on: <%= new Date(book.date_read).toLocaleDateString() %></small><br>
          <a href="/books/<%= book.id %>">Edit</a>
          <form method="post" action="/books/<%= book.id %>?_method=DELETE" style="display:inline;">
            <button type="submit">Delete</button>
          </form>
        </div>
      </li>
    <% }) %>
  </ul>
</body>
</html>
